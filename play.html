<!doctype html>
<html lang="hi">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Candy Match ‚Äî Play</title>
  <link rel="stylesheet" href="css/style.css">
</head>
<body>
  <header class="topbar">
    <div class="brand">üç¨ Candy Match</div>
    <nav class="nav">
      <a href="index.html">Home</a>
      <a href="map.html">Map</a>
      <a href="play.html">Play</a>
    </nav>
  </header>

  <main>
    <div class="card game-card">
      <a class="back" href="map.html">‚Üê Map</a>
      <h2 id="levelTitle">Level 1</h2>

      <div class="stats-row">
        <div class="stat">Score: <span id="score">0</span></div>
        <div class="stat">Moves: <span id="moves">30</span></div>
        <div class="stat">Target: <span id="target">600</span></div>
        <div class="stat">Timer: <span id="timer">--:--</span></div>
      </div>

      <div id="gridWrap" class="game-grid-container">
        <div id="gameGrid" class="game-grid" role="application" aria-label="game grid"></div>
      </div>

      <div class="row center" style="margin-top:14px;">
        <button class="btn" onclick="Game.restart()">Restart</button>
        <button class="btn" onclick="Game.end()">End</button>
      </div>
    </div>
  </main>

  <!-- Game Over Modal -->
  <div id="gameOverModal" class="modal hidden" aria-hidden="true">
    <div class="modal-backdrop" id="goBackdrop"></div>
    <div class="modal-card">
      <h3>Level <span id="go-level">1</span> Complete!</h3>
      <p>Score: <strong id="go-score">0</strong></p>
      <div class="go-actions">
        <button id="go-replay" class="btn primary">Replay</button>
        <button id="go-next" class="btn primary">Next</button>
        <button id="go-map" class="btn">Map</button>
      </div>
    </div>
  </div>

  <script src="js/game.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', ()=> {
      // start or resume level on page load
      Game.start();

      // modal buttons
      document.getElementById('go-replay').addEventListener('click', ()=> {
        document.getElementById('gameOverModal').classList.remove('show');
        document.getElementById('gameOverModal').classList.add('hidden');
        Game.restart();
      });
      document.getElementById('go-next').addEventListener('click', ()=> {
        document.getElementById('gameOverModal').classList.remove('show');
        document.getElementById('gameOverModal').classList.add('hidden');
        Game.nextLevel();
      });
      document.getElementById('go-map').addEventListener('click', ()=> {
        document.getElementById('gameOverModal').classList.remove('show');
        document.getElementById('gameOverModal').classList.add('hidden');
        window.location.href = 'map.html';
      });
    });
  </script>
</body>
</html>
