/* ---------- Layout & page basic ---------- */
* { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
body {
  margin: 0;
  font-family: Inter, system-ui, "Segoe UI", Roboto, "Noto Sans", "Helvetica Neue", Arial;
  background: linear-gradient(180deg, #f7fbfc 0%, #f0fbff 100%);
  color: #111;
  -webkit-font-smoothing: antialiased;
}

/* topbar */
.topbar {
  display:flex;
  align-items:center;
  justify-content:space-between;
  padding:10px 14px;
  background: linear-gradient(180deg,#ffd9e6 0,#ffeef6 100%);
  position:sticky;
  top:0;
  z-index:30;
  border-bottom: 1px solid rgba(0,0,0,0.03);
}
.topbar .brand { font-weight:700; display:flex; align-items:center; gap:8px; }
.nav a { margin-left:12px; text-decoration:none; color:#1976d2; font-weight:600; }

/* card */
.card, .game-card {
  background: #fff;
  border-radius:16px;
  padding:18px;
  margin:18px auto;
  max-width:920px;
  box-shadow: 0 8px 30px rgba(10,20,40,0.06);
}

/* small page layout */
main { padding-bottom: 56px; }
.row { display:flex; gap:12px; align-items:center; }
.row.center { justify-content:center; }
.btn {
  display:inline-block;
  padding:8px 14px;
  border-radius:10px;
  border:1px solid rgba(0,0,0,0.06);
  background: #fff;
  cursor:pointer;
}
.btn.primary { background:#2196f3; color:#fff; border-color: #1a88d9; }

/* stats row */
.stats-row { display:flex; gap:12px; flex-wrap:wrap; margin:12px 0 18px; }
.stat {
  background:#fff;
  padding:10px 14px;
  border-radius:12px;
  box-shadow: 0 8px 20px rgba(10,20,40,0.05);
  min-width:110px;
  text-align:center;
  font-weight:600;
}

/* ---------- game grid container & responsiveness ---------- */
/* wrap: centers grid and caps width so grid never overflows horizontally */
.game-grid-container {
  display:flex;
  justify-content:center;
  padding: 6px 10px 18px;
}

/* the grid itself
   - uses CSS var --cols (set by JS) to create responsive columns
   - max-width ensures it doesn't overflow the viewport
*/
.game-grid {
  display:grid;
  gap:12px;
  justify-content:center;
  grid-template-columns: repeat(var(--cols,6), 1fr);
  width: 100%;
  max-width: min(680px, 92vw); /* keep grid contained */
  touch-action: none; /* allow custom touch handling for swipes */
  padding: 8px;
  margin: 0 auto;
}

/* each cell keeps square aspect and scales nicely */
.game-grid .cell {
  background: #fff;
  border-radius: 12px;
  box-shadow: 0 8px 20px rgba(10,20,40,0.06);
  display:flex;
  align-items:center;
  justify-content:center;
  user-select:none;
  -webkit-user-drag: none;
  position: relative;
  overflow: visible;
  aspect-ratio: 1 / 1; /* keeps square */
  width: 100%; /* width determined by grid column */
  transition: transform 0.18s ease, box-shadow 0.12s;
}

/* candy image */
.game-grid .cell img {
  width: 72%;
  height: 72%;
  object-fit: contain;
  pointer-events: none;
  -webkit-user-drag: none;
  transition: transform 0.12s ease, opacity 0.12s ease;
}

/* swapping effect & invalid shake */
.cell.swapping { transform: scale(0.96); box-shadow: 0 10px 28px rgba(0,0,0,0.12); }
.cell.invalid { animation: shake .18s; }
@keyframes shake {
  0%{ transform: translateX(0); }
  25%{ transform: translateX(-8px); }
  50%{ transform: translateX(6px); }
  75%{ transform: translateX(-4px); }
  100%{ transform: translateX(0); }
}

/* dragging clone (absolute element shown while dragging) */
.dragging-clone {
  position: fixed;
  z-index: 9999;
  width: clamp(40px, 12vw, 64px);
  height: clamp(40px, 12vw, 64px);
  transform: translate(-50%, -50%);
  pointer-events: none;
  transition: transform 0.08s linear;
  border-radius: 10px;
}

/* small screens: slightly larger candy inside */
@media (max-width:520px) {
  .game-grid .cell img { width: 78%; height:78%; }
  .stat { min-width: 100px; }
  .card { margin:14px 10px; }
}

/* ensure no horizontal scrollbar caused by grid children */
html, body { overflow-x: hidden; }

/* modal (game over) basic */
.modal.hidden { display:none; }
.modal.show { display:block; position:fixed; inset:0; z-index:999; }
.modal-backdrop { position: fixed; inset:0; background: rgba(0,0,0,0.36); }
.modal-card { position:relative; max-width:420px; margin: 12vh auto; background:#fff; padding:20px; border-radius:12px; box-shadow:0 10px 30px rgba(0,0,0,0.18); text-align:center; }

/* small helper */
.back { color:#6b46c1; text-decoration:none; display:inline-block; margin-bottom:8px; }
