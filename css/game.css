/* css/game.css
   Paste this file into css/game.css (replace the old file).
   This keeps tile sizes fixed and responsive so candies won't appear huge.
*/

:root{
  --bg-top: #ffd7e6;
  --bg-bottom: #ffe7d9;
  --card-shadow: rgba(219,100,160,0.14);
  --tile-size: 56px; /* default tile size (desktop). small screens override below */
  --tile-gap: 12px;
  --board-max-width: 520px;
}

/* Page background (kept minimal; you already have other background rules) */
body {
  margin:0;
  padding:0;
  font-family: "Poppins", system-ui, -apple-system, "Segoe UI", Roboto, Arial;
  background: linear-gradient(180deg, var(--bg-top), var(--bg-bottom));
  -webkit-font-smoothing:antialiased;
  min-height:100vh;
}

/* Board container */
.board {
  margin: 14px auto;
  padding: 18px;
  max-width: var(--board-max-width);
  border-radius: 20px;
  background: linear-gradient(180deg, rgba(255,255,255,0.98), rgba(255,248,250,0.96));
  box-shadow: 0 18px 40px var(--card-shadow), inset 0 2px 0 rgba(255,255,255,0.6);
  display: grid;
  gap: var(--tile-gap);
  /* IMPORTANT: if JS sets grid-template-columns, that will work.
     This fallback ensures a grid shows even if JS not ready */
  grid-template-columns: repeat(6, 1fr);
  transform: translateZ(0);
  box-sizing: border-box;
}

/* Each cell wrapper (keeps square cells) */
.cell {
  width: 100%;
  aspect-ratio: 1 / 1; /* keeps square */
  display:flex;
  align-items:center;
  justify-content:center;
  background: rgba(255,255,255,0.92);
  border-radius: 12px;
  box-shadow: 0 6px 14px rgba(0,0,0,0.06), 0 2px 0 rgba(255,255,255,0.85) inset;
  position: relative;
  overflow: hidden;
  transition: transform 150ms ease, box-shadow 150ms ease;
  box-sizing: border-box;
}

/* Slight hover lift */
.cell:hover { transform: translateY(-6px); box-shadow: 0 20px 40px rgba(0,0,0,0.09); }

/* Tile image: constrain size and preserve aspect-ratio */
.tile {
  width: calc(var(--tile-size) * 0.9);
  height: calc(var(--tile-size) * 0.9);
  max-width: 100%;
  max-height: 100%;
  object-fit: contain;
  user-select: none;
  -webkit-user-drag: none;
  transition: transform 160ms ease, opacity 160ms ease;
  z-index: 2;
  filter: drop-shadow(0 6px 10px rgba(81,38,64,0.12));
  display:block;
}

/* Fallback: sometimes images are direct children of .cell without .tile class */
.cell img { 
  width: calc(var(--tile-size) * 0.9);
  height: calc(var(--tile-size) * 0.9);
  object-fit: contain;
}

/* Selection/animation classes (keep them) */
.selected-cell { outline: 3px solid rgba(255,111,179,0.12); transform: scale(1.03); }
.tile.selected { transform: scale(1.08); }
.tile.pop { transform: scale(0.2) rotate(-30deg); opacity: 0; transition: transform 300ms ease, opacity 300ms ease; }

/* Responsive sizes */
@media (max-width:420px){
  :root { --tile-size: 44px; --tile-gap: 8px; --board-max-width: 360px; }
}
@media (min-width:421px) and (max-width:760px){
  :root { --tile-size: 50px; --tile-gap: 10px; --board-max-width: 460px; }
}
@media (min-width:761px){
  :root { --tile-size: 60px; --tile-gap: 12px; --board-max-width: 640px; }
}

/* ensure the board does not expand beyond container when images try to be large */
.board, .cell, .tile { box-sizing: border-box; }

/* small polish for HUD/buttons (optional) */
.topbar { display:flex; align-items:center; gap:12px; padding:12px; }
.coins-bubble{ background:#fff; padding:8px 12px; border-radius:28px; box-shadow: 0 10px 24px rgba(111,21,63,0.06); }

/* If something else (other CSS) sets images huge with !important, this will help */
.tile, .cell img { max-width: calc(var(--tile-size) * 0.95) !important; max-height: calc(var(--tile-size) * 0.95) !important; }
