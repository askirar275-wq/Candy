<!doctype html>
<html lang="hi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Level Map ‚Äî Candy Match</title>
  <link rel="stylesheet" href="css/style.css">
</head>
<body>
<header class="site-header">
  <div class="brand">üç¨ Candy Match</div>
  <nav class="top-nav">
    <a href="index.html">Home</a>
    <a href="map.html">Map</a>
    <a href="play.html">Play</a>
  </nav>
</header>

<main class="container">
  <section class="card">
    <a class="back" href="index.html">‚Üê Home</a>
    <h2>Level Map</h2>
    <button id="resetProgress" class="btn">Reset Progress</button>

    <div id="mapGrid" class="map-grid"></div>
  </section>
</main>

<script>
  // simple map generation (9 levels)
  const mapGrid = document.getElementById('mapGrid');
  const LEVEL_COUNT = 9;
  function getUnlocked(){
    const s = localStorage.getItem('candy_unlocked');
    if(!s) { localStorage.setItem('candy_unlocked','1'); return 1; }
    return parseInt(s,10);
  }
  function renderMap(){
    mapGrid.innerHTML = '';
    const unlocked = getUnlocked();
    for(let i=1;i<=LEVEL_COUNT;i++){
      const a = document.createElement('a');
      a.className = 'level-card' + (i<=unlocked ? '' : ' locked');
      a.href = i<=unlocked ? `play.html?level=${i}` : '#';
      a.innerHTML = `<div class="thumb"><img src="images/candy${(i%6||6)}.png" alt=""></div><div class="lvl">Level ${i}</div><div class="desc">${i<=unlocked?'Play':'Locked'}</div>`;
      a.addEventListener('click', (e)=>{ if(i>unlocked) e.preventDefault(); });
      mapGrid.appendChild(a);
    }
  }
  document.getElementById('resetProgress').addEventListener('click', ()=> {
    localStorage.setItem('candy_unlocked','1');
    alert('Progress reset.');
    renderMap();
  });
  renderMap();
</script>

</body>
</html>
