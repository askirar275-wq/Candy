<!DOCTYPE html>
<html lang="hi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Candy Match üç¨</title>

  <!-- CSS Files (‡§Ö‡§™‡§®‡•Ä ‡§´‡§æ‡§á‡§≤‡•á‡§Ç ‡§∞‡§ñ‡•ã) -->
  <link rel="stylesheet" href="css/home.css">
  <link rel="stylesheet" href="css/game.css">

  <style>
    /* ‡§õ‡•ã‡§ü‡•á-‡§õ‡•ã‡§ü‡•á ‡§Ö‡§§‡§ø‡§∞‡§ø‡§ï‡•ç‡§§ ‡§∏‡•ç‡§ü‡§æ‡§á‡§≤ (‡§Ø‡§¶‡§ø ‡§ú‡§∞‡•Ç‡§∞‡§§ ‡§π‡•ã ‡§§‡•ã) */
    .screen { display: none; }
    .screen.active { display: block; }
    /* Shop modal light style fallback */
    .shop-modal {
      position: fixed; inset: 0; display: none; align-items: center; justify-content: center;
      background: rgba(10,10,20,0.45); z-index: 9999;
    }
    .shop-card {
      width: 94%; max-width: 420px; background: #fff; border-radius: 14px; padding: 14px;
      box-shadow: 0 20px 60px rgba(0,0,0,0.12);
    }
    .shop-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top:10px; }
    .shop-item {
      background: linear-gradient(180deg,#fff7fb,#fff); padding:8px; border-radius:10px; text-align:center;
      box-shadow: inset 0 4px 12px rgba(255,200,240,0.04);
    }
    .shop-item button { margin-top:8px; padding:8px 10px; border-radius:10px; border:0; cursor:pointer; }
    .shop-top { display:flex; justify-content:space-between; align-items:center; gap:10px }
    .shop-row {display:flex; gap:10px; align-items:center; margin-top:8px;}
    .coins-bubble { background:linear-gradient(90deg,#fff4e6,#fff); padding:6px 10px; border-radius:999px; font-weight:800; }
    .small-note{ font-size:13px; color:#666; margin-top:6px; }
  </style>
</head>
<body>
  <!-- üè† HOME SCREEN -->
  <div id="home-screen" class="screen active">
    <img src="images/candy1.png" alt="logo" class="logo" style="width:110px;height:110px;display:block;margin:6px auto;">
    <h1 class="title">üç≠ Candy Match</h1>
    <p class="subtitle">‡§∏‡•ç‡§µ‡•Ä‡§ü ‡§ó‡•á‡§Æ ‡§è‡§°‡§µ‡•á‡§Ç‡§ö‡§∞ ‚Äî ‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤ ‡§´‡•ç‡§∞‡•á‡§Ç‡§°‡§≤‡•Ä</p>

    <div class="buttons" style="display:flex;flex-direction:column;gap:10px;align-items:center;margin-top:12px;">
      <button id="startBtn" style="width:80%;padding:12px;border-radius:12px;">üéÆ Start</button>
      <button id="shopBtn" style="width:80%;padding:12px;border-radius:12px;">üõí Shop</button>
      <button id="settingsBtn" style="width:80%;padding:12px;border-radius:12px;">‚öôÔ∏è Settings</button>
    </div>

    <button id="installBtn" class="install" style="margin-top:12px;padding:8px 14px;border-radius:10px;">‚¨áÔ∏è Install</button>
    <p class="footer" style="margin-top:12px;color:#666">Made with ‚ù§Ô∏è ‚Äî Arun App Studio</p>
  </div>

  <!-- üéÆ GAME SCREEN -->
  <div id="game-screen" class="screen">
    <div class="topbar" style="display:flex;align-items:center;gap:10px;padding:10px;">
      <button id="backBtn" style="padding:8px 10px;border-radius:8px;">‚¨ÖÔ∏è Home</button>
      <h2 style="margin:0">Score: <span id="score">0</span></h2>
      <div style="margin-left:auto" class="coins-bubble">Coins: <span id="coins">0</span></div>
    </div>
    <div id="game-board" class="board" style="display:grid;grid-template-columns:repeat(8,1fr);gap:6px;padding:8px;max-width:420px;margin:10px auto;"></div>

    <div style="display:flex;justify-content:center;gap:8px;margin-top:14px;">
      <button id="restartBtn" style="padding:8px 12px;border-radius:8px;">Restart</button>
      <button id="shuffleBtn" style="padding:8px 12px;border-radius:8px;">Shuffle</button>
      <button id="openShopBtn" style="padding:8px 12px;border-radius:8px;">Open Shop</button>
    </div>
  </div>

  <!-- üõí SHOP MODAL -->
  <div id="shopModal" class="shop-modal" role="dialog" aria-hidden="true">
    <div class="shop-card">
      <div class="shop-top">
        <div>
          <h3 style="margin:0">üõí Shop</h3>
          <div class="small-note">Coins ‡§∏‡•á power-ups ‡§ñ‡§∞‡•Ä‡§¶‡•á‡§Ç ‚Äî Demo</div>
        </div>
        <div style="text-align:right">
          <div style="font-size:12px;color:#666">Your Coins</div>
          <div class="coins-bubble" id="shopCoins">0</div>
        </div>
      </div>

      <div class="shop-grid">
        <div class="shop-item">
          <div style="font-size:20px">üí£ Bomb</div>
          <div style="font-weight:800;margin-top:8px">‚Çπ 200</div>
          <button id="buyBomb">Buy</button>
        </div>

        <div class="shop-item">
          <div style="font-size:20px">üîÄ Shuffle</div>
          <div style="font-weight:800;margin-top:8px">‚Çπ 100</div>
          <button id="buyShuffle">Buy</button>
        </div>

        <div class="shop-item">
          <div style="font-size:20px">‚ûï Extra Moves</div>
          <div style="font-weight:800;margin-top:8px">‚Çπ 80</div>
          <button id="buyMoves">Buy</button>
        </div>

        <div class="shop-item">
          <div style="font-size:20px">‚ú® Rainbow Candy</div>
          <div style="font-weight:800;margin-top:8px">‚Çπ 350</div>
          <button id="buyRainbow">Buy</button>
        </div>
      </div>

      <div style="display:flex;justify-content:flex-end;gap:8px;margin-top:12px;">
        <button id="closeShop" style="padding:8px 12px;border-radius:8px;">Close</button>
      </div>
    </div>
  </div>

  <!-- JS Files (‡§Ü‡§™‡§ï‡•Ä ‡§Æ‡•å‡§ú‡•Ç‡§¶‡§æ ‡§´‡§æ‡§á‡§≤‡•á‡§Ç) -->
  <script src="js/home.js"></script>
  <script src="js/game.js"></script>

  <!-- Inline: Shop + Screen logic (Hindi comments) -->
  <script>
    // ---------- ‡§≤‡•ã‡§ï‡§≤ ‡§∏‡•ç‡§ü‡•á‡§ü (‡§∏‡§ø‡§Ç‡§™‡§≤ demo) ----------
    let coins = Number(localStorage.getItem('candy_coins') || 250); // ‡§°‡•á‡§Æ‡•ã ‡§ï‡•á ‡§≤‡§ø‡§è ‡§∂‡•Å‡§∞‡•Å‡§Ü‡§§‡•Ä ‡§ï‡•â‡§á‡§®‡•ç‡§∏
    let inv = JSON.parse(localStorage.getItem('candy_inv') || JSON.stringify({bomb:0, shuffle:0, moves:0, rainbow:0}));

    // DOM refs
    const homeScreen = document.getElementById('home-screen');
    const gameScreen = document.getElementById('game-screen');
    const shopModal = document.getElementById('shopModal');
    const shopCoins = document.getElementById('shopCoins');
    const coinsBubble = document.getElementById('coins');
    const scoreEl = document.getElementById('score');

    // ‡§¨‡§ü‡§® ‡§π‡•Å‡§ï‡§Ö‡§™
    document.getElementById('startBtn').addEventListener('click', () => {
      showScreen('game');
      // ‡§Ö‡§ó‡§∞ game.js ‡§Æ‡•á‡§Ç initGame ‡§π‡•à ‡§§‡•ã ‡§µ‡§π ‡§ö‡§≤‡§æ ‡§¶‡•á‡§ó‡§æ; ‡§µ‡§∞‡§®‡§æ, ‡§∏‡§æ‡§¶‡§æ ‡§¨‡•ã‡§∞‡•ç‡§° ‡§¨‡§®‡§æ‡§ì
      if (typeof initGame === 'function') initGame();
      updateHUD();
    });

    // Home ‡§¨‡§ü‡§®
    document.getElementById('backBtn').addEventListener('click', () => showScreen('home'));

    // Shop ‡§¨‡§ü‡§® (‡§π‡•ã‡§Æ ‡§™‡§∞)
    document.getElementById('shopBtn').addEventListener('click', () => openShop());

    // Open Shop (‡§á‡§®-‡§ó‡•á‡§Æ)
    document.getElementById('openShopBtn').addEventListener('click', () => openShop());

    // Close Shop
    document.getElementById('closeShop').addEventListener('click', () => closeShop());

    // install/settings simple demo handlers
    document.getElementById('installBtn').addEventListener('click', () => alert('Install demo ‚Äî ‡§Ü‡§™ ‡§á‡§∏‡•á PWA ‡§Æ‡•á‡§Ç ‡§¨‡§¶‡§≤ ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç‡•§'));
    document.getElementById('settingsBtn').addEventListener('click', () => alert('Settings ‚Äî ‡§Ö‡§≠‡•Ä demo ‡§Æ‡•á‡§Ç ‡§®‡§π‡•Ä‡§Ç ‡§π‡•à‡•§'));

    // Buy handlers
    document.getElementById('buyBomb').addEventListener('click', () => buyItem('bomb', 200));
    document.getElementById('buyShuffle').addEventListener('click', () => buyItem('shuffle', 100));
    document.getElementById('buyMoves').addEventListener('click', () => buyItem('moves', 80));
    document.getElementById('buyRainbow').addEventListener('click', () => buyItem('rainbow', 350));

    // Restart / Shuffle quick handlers (game.js may define actual behavior)
    document.getElementById('restartBtn').addEventListener('click', () => {
      if (typeof initGame === 'function') initGame();
      else alert('Restart: ‡§ó‡•á‡§Æ ‡§´‡§º‡§Ç‡§ï‡•ç‡§∂‡§® ‡§â‡§™‡§≤‡§¨‡•ç‡§ß ‡§®‡§π‡•Ä‡§Ç (initGame ‡§®‡§æ‡§Æ‡§ï function ‡§ñ‡•ã‡§ú‡•á‡§Ç)‡•§');
    });
    document.getElementById('shuffleBtn').addEventListener('click', () => {
      if (typeof shuffleBoard === 'function') shuffleBoard();
      else alert('Shuffle: ‡§ó‡•á‡§Æ ‡§Æ‡•á‡§Ç shuffle function ‡§â‡§™‡§≤‡§¨‡•ç‡§ß ‡§®‡§π‡•Ä‡§Ç‡•§');
    });

    // Shop open/close
    function openShop(){
      shopModal.style.display = 'flex';
      shopModal.setAttribute('aria-hidden','false');
      refreshShopUI();
    }
    function closeShop(){
      shopModal.style.display = 'none';
      shopModal.setAttribute('aria-hidden','true');
    }

    // ‡§∏‡•ç‡§ï‡•ç‡§∞‡•Ä‡§® ‡§¶‡§ø‡§ñ‡§æ‡§®‡§æ
    function showScreen(which){
      if(which === 'home'){
        homeScreen.classList.add('active');
        gameScreen.classList.remove('active');
      } else if(which === 'game'){
        gameScreen.classList.add('active');
        homeScreen.classList.remove('active');
      }
    }

    // ‡§ñ‡§∞‡•Ä‡§¶‡§æ‡§∞‡•Ä ‡§≤‡•â‡§ú‡§ø‡§ï
    function buyItem(id, price){
      if(coins < price){
        alert('‡§ï‡•â‡§á‡§®‡•ç‡§∏ ‡§ï‡§Æ ‡§π‡•à‡§Ç ‚Äî ‡§ó‡•á‡§Æ ‡§ñ‡•á‡§≤‡§ï‡§∞ ‡§ú‡§Æ‡§æ ‡§ï‡§∞‡•á‡§Ç‡•§');
        return;
      }
      coins -= price;
      inv[id] = (inv[id] || 0) + 1;
      persistState();
      refreshShopUI();
      updateHUD();
      alert('‡§ñ‡§∞‡•Ä‡§¶‡§æ‡§∞‡•Ä ‡§∏‡§´‡§≤: ' + id + ' √ó1');
    }

    // ‡§∏‡•ç‡§ü‡•á‡§ü ‡§∏‡•á‡§µ/‡§≤‡•ã‡§°
    function persistState(){
      localStorage.setItem('candy_coins', String(coins));
      localStorage.setItem('candy_inv', JSON.stringify(inv));
    }

    function refreshShopUI(){
      shopCoins.textContent = coins;
      coinsBubble.textContent = coins;
      // display inventory counts (optional): ‡§Ü‡§™ ‡§á‡§∏‡•á UI ‡§Æ‡•á‡§Ç ‡§¶‡§ø‡§ñ‡§æ ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç
      // ex: document.getElementById('invBomb').textContent = inv.bomb || 0;
    }

    // HUD ‡§Ö‡§™‡§°‡•á‡§ü
    function updateHUD(){
      scoreEl.textContent = window.__score || scoreEl.textContent || 0;
      coinsBubble.textContent = coins;
      shopCoins.textContent = coins;
    }

    // ‡§™‡•á‡§ú ‡§≤‡•ã‡§° ‡§™‡§∞ ‡§á‡§®‡§ø‡§∂‡§ø‡§Ø‡§≤ ‡§Ö‡§™‡§°‡•á‡§ü
    (function boot(){
      refreshShopUI();
      updateHUD();
      // debug message
      if (window.DEBUG_MODE) console.log('Shop module loaded ‚Äî coins:', coins, 'inv:', inv);
    })();
  </script>

  <!-- üß© DEBUG TOGGLE SCRIPT (Eruda ‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤ ‡§ï‡§Ç‡§∏‡•ã‡§≤) -->
  <script>
    const DEBUG_MODE = true; // testing ‡§ï‡•á ‡§≤‡§ø‡§è true, production ‡§Æ‡•á‡§Ç false ‡§ï‡§∞ ‡§¶‡•á‡§Ç
    if (DEBUG_MODE) {
      const s = document.createElement("script");
      s.src = "https://cdn.jsdelivr.net/npm/eruda";
      s.onload = () => { eruda.init(); console.log("‚úÖ Eruda started (mobile console)"); };
      document.body.appendChild(s);
    }
  </script>
</body>
                                                      </html>
