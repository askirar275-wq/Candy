<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Simple App</title>

<style>
body{
  margin:0;
  font-family:Arial,system-ui;
  background:#0f172a;
  color:#fff;
}
.center{
  min-height:100vh;
  display:flex;
  align-items:center;
  justify-content:center;
}
.card{
  width:90%;
  max-width:360px;
  background:#020617;
  padding:22px;
  border-radius:16px;
}
input{
  width:100%;
  padding:12px;
  margin:8px 0;
  border-radius:10px;
  border:none;
}
button{
  width:100%;
  padding:12px;
  margin-top:10px;
  border:none;
  border-radius:12px;
  background:#2563eb;
  color:#fff;
  font-size:16px;
}
.google{
  background:#fff;
  color:#000;
}
.hidden{display:none}
</style>
</head>

<body>

<!-- LOGIN -->
<div id="login" class="center">
  <div class="card">
    <h2 style="text-align:center">Login</h2>
    <input id="email" placeholder="Email">
    <input id="password" type="password" placeholder="Password">
    <button onclick="emailLogin()">Login / Signup</button>
    <button class="google" onclick="googleLogin()">Login with Google</button>
    <p id="msg"></p>
  </div>
</div>

<!-- APP -->
<div id="app" class="center hidden">
  <div class="card">
    <h2>âœ… Welcome</h2>
    <p>You are logged in</p>
    <button onclick="logout()">Logout</button>
  </div>
</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.7.0/firebase-app.js";
import { 
  getAuth,
  onAuthStateChanged,
  signInWithEmailAndPassword,
  createUserWithEmailAndPassword,
  GoogleAuthProvider,
  signInWithPopup,
  signOut
} from "https://www.gstatic.com/firebasejs/12.7.0/firebase-auth.js";

const firebaseConfig = {
  apiKey: "AIzaSyA7U96MP2BheQ1ilIUqd2UgycPs8KVC-Gc",
  authDomain: "chatapp-d38d3.firebaseapp.com",
  projectId: "chatapp-d38d3",
  appId: "1:321814992234:web:d1d8eb9d63fcafc53ec113"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);

const loginBox = document.getElementById("login");
const appBox = document.getElementById("app");
const msg = document.getElementById("msg");

/* EMAIL LOGIN */
window.emailLogin = async ()=>{
  const e=email.value,p=password.value;
  try{
    await signInWithEmailAndPassword(auth,e,p);
  }catch{
    await createUserWithEmailAndPassword(auth,e,p);
  }
};

/* GOOGLE LOGIN */
window.googleLogin = async ()=>{
  await signInWithPopup(auth,new GoogleAuthProvider());
};

/* AUTH STATE */
onAuthStateChanged(auth,(user)=>{
  if(user){
    loginBox.classList.add("hidden");
    appBox.classList.remove("hidden");
  }else{
    loginBox.classList.remove("hidden");
    appBox.classList.add("hidden");
  }
});

/* LOGOUT */
window.logout = ()=>signOut(auth);
</script>

</body>
</html>
