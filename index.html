<!DOCTYPE html>
<html lang="hi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Candy Match 🍬</title>

  <!-- CSS Files -->
  <link rel="stylesheet" href="css/home.css">
  <link rel="stylesheet" href="css/game.css">
  <link rel="stylesheet" href="css/inventory.css">

  <style>
    .screen { display: none; }
    .screen.active { display: block; }
  </style>
</head>
<body>
  <!-- 🏠 HOME SCREEN -->
  <div id="home-screen" class="screen active">
    <img src="images/candy1.png" alt="logo" class="logo" style="width:110px;height:110px;display:block;margin:6px auto;">
    <h1 class="title">🍭 Candy Match</h1>
    <p class="subtitle">स्वीट गेम एडवेंचर — मोबाइल फ्रेंडली</p>

    <div class="buttons" style="display:flex;flex-direction:column;gap:10px;align-items:center;margin-top:12px;">
      <button id="startBtn" style="width:80%;padding:12px;border-radius:12px;">🎮 Start</button>
      <button id="shopBtn" style="width:80%;padding:12px;border-radius:12px;">🛒 Shop</button>
      <button id="settingsBtn" style="width:80%;padding:12px;border-radius:12px;">⚙️ Settings</button>
    </div>

    <button id="installBtn" class="install" style="margin-top:12px;padding:8px 14px;border-radius:10px;">⬇️ Install</button>
    <p class="footer" style="margin-top:12px;color:#666">Made with ❤️ — Arun App Studio</p>
  </div>

  <!-- 🎮 GAME SCREEN -->
  <div id="game-screen" class="screen">
    <div class="topbar" style="display:flex;align-items:center;gap:10px;padding:10px;">
      <button id="backBtn" style="padding:8px 10px;border-radius:8px;">⬅️ Home</button>
      <h2 style="margin:0">Score: <span id="score">0</span></h2>
      <div style="margin-left:auto" class="coins-bubble">Coins: <span id="coins">0</span></div>
    </div>

    <div id="game-board" class="board"
         style="display:grid;grid-template-columns:repeat(6,1fr);gap:6px;
                padding:8px;max-width:420px;margin:10px auto;">
    </div>

    <div style="display:flex;justify-content:center;gap:8px;margin-top:14px;">
      <button id="restartBtn" style="padding:8px 12px;border-radius:8px;" onclick="initGame()">Restart</button>
      <button id="shuffleBtn" style="padding:8px 12px;border-radius:8px;" onclick="shuffleBoard()">Shuffle</button>
      <button id="openShopBtn" style="padding:8px 12px;border-radius:8px;">Open Shop</button>
    </div>
  </div>

  <!-- 🛒 SHOP MODAL -->
  <div id="shopModal" class="shop-modal" role="dialog" aria-hidden="true" style="display:none;">
    <div class="shop-card">
      <div class="shop-top" style="display:flex;justify-content:space-between;align-items:center;">
        <div>
          <h3 style="margin:0">🛒 Shop</h3>
          <div class="small-note">Coins से power-ups खरीदें — Demo</div>
        </div>
        <div style="text-align:right">
          <div style="font-size:12px;color:#666">Your Coins</div>
          <div class="coins-bubble" id="shopCoins">0</div>
        </div>
      </div>

      <div class="shop-grid">
        <div class="shop-item">
          <div style="font-size:20px">💣 Bomb</div>
          <div style="font-weight:800;margin-top:8px">₹ 200</div>
          <button id="buyBomb">Buy</button>
        </div>
        <div class="shop-item">
          <div style="font-size:20px">🔀 Shuffle</div>
          <div style="font-weight:800;margin-top:8px">₹ 100</div>
          <button id="buyShuffle">Buy</button>
        </div>
        <div class="shop-item">
          <div style="font-size:20px">➕ Extra Moves</div>
          <div style="font-weight:800;margin-top:8px">₹ 80</div>
          <button id="buyMoves">Buy</button>
        </div>
        <div class="shop-item">
          <div style="font-size:20px">🌈 Rainbow Candy</div>
          <div style="font-weight:800;margin-top:8px">₹ 350</div>
          <button id="buyRainbow">Buy</button>
        </div>
      </div>

      <div style="display:flex;justify-content:flex-end;gap:8px;margin-top:12px;">
        <button id="closeShop" style="padding:8px 12px;border-radius:8px;">Close</button>
      </div>
    </div>
  </div>

  <!-- 📜 SCRIPT FILES -->
  <script src="js/home.js"></script>
  <script src="js/game.js"></script>
  <script src="js/shop.js"></script>
  <script src="js/inventory.js"></script>

  <!-- 🌿 Parallax effect (background moves slightly on tilt/scroll) -->
  <script>
  (function(){
    const MAX_SHIFT = 18, MAX_SHIFT_X = 10;
    function setParallax(x, y){
      document.documentElement.style.setProperty('--parallax-tx', x + 'px');
      document.documentElement.style.setProperty('--parallax-ty', y + 'px');
    }
    window.addEventListener('scroll', () => {
      const docH = document.documentElement.scrollHeight - window.innerHeight;
      if(docH <= 0) return;
      const pct = window.scrollY / docH;
      const y = (pct - 0.5) * 2 * MAX_SHIFT * 0.6;
      const x = (pct - 0.5) * 2 * MAX_SHIFT_X * 0.3;
      setParallax(x, y);
    }, {passive:true});
    document.addEventListener('touchmove', (ev) => {
      if(!ev.touches || ev.touches.length === 0) return;
      const t = ev.touches[0];
      setParallax(t.clientX / 40 - 10, t.clientY / 40 - 10);
    }, {passive:true});
    window.addEventListener('deviceorientation', (ev) => {
      if(!ev) return;
      const gx = ev.gamma || 0, by = ev.beta || 0;
      const x = (gx / 45) * MAX_SHIFT_X;
      const y = (by / 45) * MAX_SHIFT;
      setParallax(x, y);
    }, true);
  })();
  </script>

  <!-- 🧩 Debug console for mobile (Eruda) -->
  <script>
    const DEBUG_MODE = true;
    if (DEBUG_MODE) {
      const s = document.createElement("script");
      s.src = "https://cdn.jsdelivr.net/npm/eruda";
      s.onload = () => {
        eruda.init();
        console.log("✅ Eruda started (mobile console)");
      };
      document.body.appendChild(s);
    }
  </script>
</body>
  </html>
