    for(let r=HEIGHT-1;r>=0;r--)board[r*WIDTH+c]=col[HEIGHT-1-r];
  }
  render();
  const newMatches=findMatches();
  if(newMatches.length>0)setTimeout(()=>handleMatches(newMatches),200);
  else combo=1;
}

function updateHUD(){
  document.getElementById('score').textContent=score;
  document.getElementById('moves').textContent=moves;
  document.getElementById('combo').textContent=combo+'x';
  if(moves<=0)alert("🏆 Game Over!\nYour Score: "+score);
}

document.getElementById('restartBtn').onclick=()=>initGame();
document.getElementById('hintBtn').onclick=()=>{
  const m=findMatches();
  if(m.length>0)document.querySelector(`[data-index="${m[0]}"]`).style.transform='scale(1.2)';
  setTimeout(()=>render(),1000);
};

preload();
</script>
</body>
</html>
