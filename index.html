<!DOCTYPE html>
<html lang="hi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>ЁЯНн Candy Match</title>

  <!-- CSS рдлрд╛рдЗрд▓реЗрдВ -->
  <link rel="stylesheet" href="css/home.css">
  <link rel="stylesheet" href="css/game.css">
  <link rel="stylesheet" href="css/inventory.css">
  <link rel="stylesheet" href="css/style.css">

  <style>
    .screen { display: none; }
    .screen.active { display: block; }
    .shop-modal {
      position: fixed; inset: 0;
      background: rgba(0,0,0,0.4);
      display: flex; align-items: center; justify-content: center;
      z-index: 9999;
    }
  </style>
</head>

<body>
  <!-- ЁЯПа рд╣реЛрдо рд╕реНрдХреНрд░реАрди -->
  <div id="home-screen" class="screen active">
    <img src="images/candy1.png" style="width:100px;display:block;margin:20px auto;">
    <h1>ЁЯНм Candy Match</h1>
    <p>рд╕реНрд╡реАрдЯ рдЧреЗрдо рдПрдбрд╡реЗрдВрдЪрд░ тАФ рдореЛрдмрд╛рдЗрд▓ рдлреНрд░реЗрдВрдбрд▓реА</p>
    <div style="display:flex;flex-direction:column;align-items:center;gap:10px;">
      <button id="startBtn">ЁЯОо Start</button>
      <button id="shopBtn">ЁЯЫТ Shop</button>
      <button id="settingsBtn">тЪЩя╕П Settings</button>
    </div>
  </div>

  <!-- ЁЯОо рдЧреЗрдо рд╕реНрдХреНрд░реАрди -->
  <div id="game-screen" class="screen">
    <div style="display:flex;justify-content:space-between;align-items:center;padding:10px;">
      <button id="backBtn">тмЕя╕П Home</button>
      <div>Score: <span id="score">0</span></div>
      <div>ЁЯТ░ Coins: <span id="coins">0</span></div>
    </div>

    <div id="game-board" style="display:grid;grid-template-columns:repeat(6,1fr);gap:8px;padding:12px;max-width:520px;margin:auto;"></div>

    <div style="display:flex;justify-content:center;gap:10px;margin-top:10px;">
      <button id="restartBtn">Restart</button>
      <button id="shuffleBtn">Shuffle</button>
      <button id="openShopBtn">Open Shop</button>
    </div>

    <!-- ЁЯОТ рдЗрдиреНрд╡реЗрдВрдЯрд░реА -->
    <div id="inv-toolbar" style="display:flex;justify-content:center;gap:10px;margin-top:12px;">
      <button class="inv-btn">ЁЯТг <span id="inv-bomb">0</span></button>
      <button class="inv-btn">ЁЯФА <span id="inv-shuffle">0</span></button>
      <button class="inv-btn">тЮХ <span id="inv-moves">0</span></button>
      <button class="inv-btn">ЁЯМИ <span id="inv-rainbow">0</span></button>
    </div>
  </div>

  <!-- ЁЯЫТ рд╢реЙрдк -->
  <div id="shopModal" class="shop-modal" style="display:none;">
    <div class="shop-card" style="background:white;padding:15px;border-radius:12px;max-width:400px;">
      <div style="display:flex;justify-content:space-between;">
        <h3>ЁЯЫТ Shop</h3>
        <div>Coins: <span id="shopCoins">0</span></div>
      </div>
      <p>Coins рд╕реЗ power-ups рдЦрд░реАрджреЗрдВ тАФ Demo</p>
      <div class="shop-grid" style="display:grid;gap:10px;">
        <div>ЁЯТг Bomb тВ╣200 <button class="buy-item" data-item="bomb" data-cost="200">Buy</button></div>
        <div>ЁЯФА Shuffle тВ╣100 <button class="buy-item" data-item="shuffle" data-cost="100">Buy</button></div>
        <div>тЮХ Moves тВ╣80 <button class="buy-item" data-item="moves" data-cost="80">Buy</button></div>
        <div>ЁЯМИ Rainbow тВ╣350 <button class="buy-item" data-item="rainbow" data-cost="350">Buy</button></div>
      </div>
      <div style="text-align:right;margin-top:10px;">
        <button id="closeShop">Close</button>
      </div>
    </div>
  </div>

  <!-- JS рдлрд╛рдЗрд▓реЗрдВ (defer рдХреЗ рд╕рд╛рде рддрд╛рдХрд┐ рдкрд╣рд▓реЗ HTML рд▓реЛрдб рд╣реЛ) -->
  <script src="js/game.js" defer></script>
  <script src="js/inventory.js" defer></script>
  <script src="js/shop.js" defer></script>
  <script src="js/home.js" defer></script>
  <script src="js/parallax.js" defer></script>

  <!-- ЁЯФз рдЕрдВрджрд░ рдХрд╛ JS рдЬреЛ рд╕рдмрдХреЛ рдЬреЛрдбрд╝рддрд╛ рд╣реИ -->
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const q = id => document.getElementById(id);

      const screens = document.querySelectorAll('.screen');
      const show = id => {
        screens.forEach(s => s.classList.remove('active'));
        q(id).classList.add('active');
      };

      // localStorage рдХреА default values
      if (!localStorage.getItem('candy_coins')) localStorage.setItem('candy_coins', '50');
      ['bomb','shuffle','moves','rainbow'].forEach(k => {
        if (!localStorage.getItem('inv_' + k)) localStorage.setItem('inv_' + k, '0');
      });

      const updateHUD = () => {
        const coins = localStorage.getItem('candy_coins') || 0;
        q('coins').textContent = coins;
        q('shopCoins').textContent = coins;
        ['bomb','shuffle','moves','rainbow'].forEach(it => {
          const el = q('inv-' + it);
          if (el) el.textContent = localStorage.getItem('inv_' + it) || 0;
        });
      };

      // ЁЯХ╣ Start
      q('startBtn').onclick = () => {
        show('game-screen');
        if (typeof initGame === 'function') initGame();
        updateHUD();
      };

      // ЁЯФЩ Back
      q('backBtn').onclick = () => show('home-screen');

      // ЁЯЫТ Shop Open/Close
      const openShop = () => { q('shopModal').style.display = 'flex'; updateHUD(); };
      q('shopBtn').onclick = openShop;
      q('openShopBtn').onclick = openShop;
      q('closeShop').onclick = () => q('shopModal').style.display = 'none';

      // ЁЯТ░ Buy Items
      document.querySelectorAll('.buy-item').forEach(btn => {
        btn.addEventListener('click', () => {
          const item = btn.dataset.item;
          const cost = Number(btn.dataset.cost);
          let coins = Number(localStorage.getItem('candy_coins'));
          if (coins >= cost) {
            coins -= cost;
            localStorage.setItem('candy_coins', coins);
            const key = 'inv_' + item;
            localStorage.setItem(key, Number(localStorage.getItem(key)) + 1);
            alert(item + ' рдЦрд░реАрджрд╛ рдЧрдпрд╛!');
            updateHUD();
          } else {
            alert('рдХреЙрдЗрдиреНрд╕ рдкрд░реНрдпрд╛рдкреНрдд рдирд╣реАрдВ рд╣реИрдВ!');
          }
        });
      });

      // ЁЯФБ Restart / Shuffle
      q('restartBtn').onclick = () => typeof initGame === 'function' && initGame();
      q('shuffleBtn').onclick = () => typeof shuffleBoard === 'function' && shuffleBoard();

      updateHUD();
    });
  </script>
</body>
</html>
