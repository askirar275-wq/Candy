<!DOCTYPE html>
<html lang="hi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Candy Match â€” Demo</title>

  <!-- CSS -->
  <link rel="stylesheet" href="css/home.css">
  <link rel="stylesheet" href="css/game.css">
  <link rel="stylesheet" href="css/level-map.css">

  <style>
    /* small fallback */
    body { margin:0; font-family: "Poppins", system-ui, -apple-system, "Segoe UI", Roboto, Arial; background:#ffeef6; color:#3b2a24; }
  </style>
</head>
<body>
  <!-- HOME SCREEN -->
  <div id="home-screen" class="screen active">
    <div class="home-inner">
      <img src="images/candy1.png" alt="logo" class="logo">
      <h1 class="title">ğŸ­ Candy Match</h1>
      <p class="subtitle">à¤¸à¥à¤µà¥€à¤Ÿ à¤—à¥‡à¤® à¤à¤¡à¤µà¥‡à¤‚à¤šà¤° â€” à¤®à¥‹à¤¬à¤¾à¤‡à¤² à¤«à¥à¤°à¥‡à¤‚à¤¡à¤²à¥€</p>

      <div class="home-buttons">
        <button id="startBtn" class="big-btn">ğŸ® Start</button>
        <button id="mapBtn" class="big-btn">ğŸ—ºï¸ Level Map</button>
        <button id="shopBtn" class="big-btn">ğŸ›’ Shop</button>
      </div>
    </div>
  </div>

  <!-- LEVEL MAP SCREEN -->
  <div id="map-screen" class="screen">
    <div class="map-header">
      <button id="mapBack" class="small">â¬… Home</button>
      <h2>Level Map</h2>
      <div></div>
    </div>
    <div id="levelPath" class="level-path" aria-live="polite"></div>
  </div>

  <!-- GAME SCREEN -->
  <div id="game-screen" class="screen">
    <div class="topbar">
      <button id="backBtn" class="small">â¬… Home</button>
      <div class="top-stats">
        <div class="stat">Score: <span id="score">0</span></div>
        <div class="stat">Coins: <span id="coins">0</span></div>
        <div class="stat">Level: <span id="currentLevel">1</span></div>
      </div>
    </div>

    <div id="game-board" class="board" aria-live="polite"></div>

    <div class="controls">
      <button id="restartBtn">Restart</button>
      <button id="shuffleBtn">Shuffle</button>
      <button id="openShopBtn">Shop</button>
    </div>
  </div>

  <!-- SHOP modal (simple) -->
  <div id="shopModal" class="modal" role="dialog" aria-hidden="true" style="display:none;">
    <div class="modal-card">
      <h3>ğŸ›’ Shop</h3>
      <div>Demo shop â€” coins: <span id="shopCoins">0</span></div>
      <div class="shop-grid">
        <div class="shop-item">
          <div>ğŸ”€ Shuffle</div><div>â‚¹100</div><button id="buyShuffle">Buy</button>
        </div>
        <div class="shop-item">
          <div>â• Extra Moves</div><div>â‚¹80</div><button id="buyMoves">Buy</button>
        </div>
      </div>
      <div style="text-align:right;margin-top:12px;"><button id="closeShop">Close</button></div>
    </div>
  </div>

  <!-- Level Up Modal -->
  <div id="levelUpModal" class="modal" style="display:none;">
    <div class="modal-card">
      <h2 id="levelUpTitle">Level Up!</h2>
      <p id="levelUpText">Congrats â€” new level unlocked.</p>
      <div style="text-align:center;margin-top:10px;"><button id="levelUpClose">Continue</button></div>
    </div>
  </div>

  <!-- Eruda loader (mobile console) -->
  <script>
    (function () {
      var s = document.createElement('script');
      s.src = 'https://cdn.jsdelivr.net/npm/eruda';
      s.onload = function () {
        try { eruda.init(); console.log('ğŸ Eruda console loaded'); } catch(e){ console.warn('Eruda load failed', e); }
      };
      document.body.appendChild(s);
    })();
  </script>

  <!-- Safe UI loader (binds buttons safely) -->
  <script src="js/safe-ui.js"></script>

  <!-- storage (localStorage wrapper) -->
  <script src="js/storage.js"></script>

  <!-- level map helper -->
  <script src="js/level-map.js"></script>

  <!-- game core -->
  <script src="js/game.js"></script>

  <!-- shop (optional) -->
  <script src="js/shop.js"></script>

</body><!-- Level Complete + Transition modal (paste in index.html body before storage/game script tags) -->
<div id="levelCompleteModal" aria-hidden="true" style="display:none;position:fixed;inset:0;align-items:center;justify-content:center;z-index:9999;">
  <div id="levelCompleteCard" style="width:92%;max-width:520px;background:#fff;border-radius:16px;padding:22px;box-shadow:0 8px 30px rgba(0,0,0,0.25);transform-origin:center;opacity:0;transform:scale(0.96);">
    <h2 id="levelCompleteTitle" style="margin:0 0 8px;color:#ff4081;font-size:22px;">ğŸ‰ Level Complete!</h2>
    <p id="levelCompleteMsg" style="margin:0 0 16px;color:#444;">You reached the target score. Reward: <span id="levelReward">0</span> coins</p>
    <div style="display:flex;gap:10px;justify-content:center;">
      <button id="levelNextBtn" style="padding:10px 18px;border-radius:20px;border:0;background:linear-gradient(45deg,#ff80ab,#ff4081);color:#fff;font-weight:700;">Next Level</button>
      <button id="levelMapBtn" style="padding:10px 18px;border-radius:20px;border:1px solid #eee;background:#fff;color:#333;font-weight:700;">Open Map</button>
    </div>
  </div>
</div>
</html>
