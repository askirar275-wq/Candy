<!-- scripts (paste this near the end of game.html, before </body>) -->
<script src="js/storage.js"></script>
<script src="js/confetti.js"></script>
<script src="js/game-core.js"></script>
<script src="js/game.js"></script>
<script>
  // start level from query param e.g. ?level=1
  (function(){
    try {
      const urlParams = new URLSearchParams(location.search);
      const lvl = urlParams.get('level') || 1;
      // tiny safety: wait for DOM & Game to be available
      function startWhenReady(){
        if(typeof Game !== 'undefined' && document.readyState === 'complete'){
          Game.start(lvl);
        } else if(typeof Game !== 'undefined' && document.readyState !== 'loading'){
          Game.start(lvl);
        } else {
          window.addEventListener('load', ()=> { if(typeof Game !== 'undefined') Game.start(lvl); });
        }
      }
      startWhenReady();
    } catch(e){
      console.error('Game start failed', e);
    }
  })();
</script>
