<!DOCTYPE html>
<html lang="hi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Candy Match ЁЯНм</title>

  <!-- CSS: рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░реЗрдВ рдпреЗ paths рдЖрдкрдХреЗ repo рдореЗрдВ рдореМрдЬреВрдж рд╣реИрдВ -->
  <link rel="stylesheet" href="css/home.css">
  <link rel="stylesheet" href="css/game.css">
  <link rel="stylesheet" href="css/inventory.css">

  <!-- Optional small style fallback -->
  <style>
    .screen { display: none; }
    .screen.active { display: block; }
    /* safety: рдЕрдЧрд░ CSS рдХреЛрдИ рд╡рдЬрд╣ рд╕реЗ рди рд▓реЛрдб рд╣реЛ рддреЛ board рдХрдо рд╕реЗ рдХрдо рджрд┐рдЦреЗ */
    #game-board { display:grid; grid-template-columns: repeat(6,1fr); gap:10px; max-width:520px; margin:12px auto; }
  </style>
</head>
<body>
  <!-- HOME -->
  <div id="home-screen" class="screen active">
    <img src="images/candy1.png" alt="logo" style="width:110px;height:110px;display:block;margin:6px auto;">
    <h1 class="title">ЁЯНн Candy Match</h1>
    <p class="subtitle">рд╕реНрд╡реАрдЯ рдЧреЗрдо рдПрдбрд╡реЗрдВрдЪрд░ тАФ рдореЛрдмрд╛рдЗрд▓ рдлреНрд░реЗрдВрдбрд▓реА</p>

    <div style="display:flex;flex-direction:column;gap:12px;align-items:center;margin-top:14px;">
      <button id="startBtn" style="width:80%;padding:14px;border-radius:14px;">ЁЯОо Start</button>
      <button id="shopBtn" style="width:80%;padding:14px;border-radius:14px;">ЁЯЫТ Shop</button>
      <button id="settingsBtn" style="width:80%;padding:14px;border-radius:14px;">тЪЩя╕П Settings</button>
    </div>
  </div>

  <!-- GAME -->
  <div id="game-screen" class="screen">
    <div class="topbar" style="display:flex;align-items:center;gap:12px;padding:12px;">
      <button id="backBtn" style="padding:8px 10px;border-radius:8px;">тмЕя╕П Home</button>
      <h2 style="margin:0">Score: <span id="score">0</span></h2>
      <div style="margin-left:auto" class="coins-bubble">Coins: <span id="coins">0</span></div>
    </div>

    <div id="game-board" class="board" aria-live="polite"></div>

    <div style="display:flex;justify-content:center;gap:12px;margin:18px 0;">
      <button id="restartBtn">Restart</button>
      <button id="shuffleBtn">Shuffle</button>
      <button id="openShopBtn">Open Shop</button>
    </div>
  </div>

  <!-- SHOP modal (id same as used in JS) -->
  <div id="shopModal" class="shop-modal" role="dialog" aria-hidden="true" style="display:none">
    <div class="shop-card">
      <div class="shop-top" style="display:flex;justify-content:space-between;align-items:center">
        <div><h3 style="margin:0">ЁЯЫТ Shop</h3><div class="small-note">Coins рд╕реЗ power-ups рдЦрд░реАрджреЗрдВ тАФ Demo</div></div>
        <div style="text-align:right"><div style="font-size:12px;color:#666">Your Coins</div><div class="coins-bubble" id="shopCoins">0</div></div>
      </div>

      <div class="shop-grid" style="margin-top:10px;">
        <div class="shop-item"><div style="font-size:20px">ЁЯТг Bomb</div><div style="font-weight:800">тВ╣ 200</div><button id="buyBomb">Buy</button></div>
        <div class="shop-item"><div style="font-size:20px">ЁЯФА Shuffle</div><div style="font-weight:800">тВ╣ 100</div><button id="buyShuffle">Buy</button></div>
        <div class="shop-item"><div style="font-size:20px">тЮХ Extra Moves</div><div style="font-weight:800">тВ╣ 80</div><button id="buyMoves">Buy</button></div>
        <div class="shop-item"><div style="font-size:20px">тЬи Rainbow Candy</div><div style="font-weight:800">тВ╣ 350</div><button id="buyRainbow">Buy</button></div>
      </div>

      <div style="display:flex;justify-content:flex-end;margin-top:12px;"><button id="closeShop">Close</button></div>
    </div>
  </div>

  <!-- scripts: order important -> UI helper first, рдлрд┐рд░ game logic, рдлрд┐рд░ inventory/shop -->
  <script src="js/boot.js"></script>       <!-- optional bootstrap helper, рдЕрдЧрд░ рд╣реИ -->
  <script src="js/storage.js"></script>    <!-- localStorage helper -->
  <script src="js/game.js"></script>       <!-- main game logic (рдПрдХ рд╣реА рдмрд╛рд░) -->
  <script src="js/inventory.js"></script>  <!-- inventory -->
  <script src="js/shop.js"></script>       <!-- shop logic -->
  <script src="js/parallax.js"></script>   <!-- optional parallax -->

  <!-- Inline safety + UI bindings (DOMContentLoaded рдореЗрдВ) -->
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const required = ['startBtn','shopBtn','backBtn','game-board','openShopBtn','shopModal','coins','score'];
      required.forEach(id => {
        if(!document.getElementById(id)){
          console.warn('Missing element with id:', id);
        }
      });

      // Start button -> show game screen and initGame if available
      const startBtn = document.getElementById('startBtn');
      if(startBtn){
        startBtn.addEventListener('click', () => {
          document.getElementById('home-screen').classList.remove('active');
          document.getElementById('game-screen').classList.add('active');
          if(typeof initGame === 'function') initGame();
          else console.warn('initGame function not found in game.js');
        });
      }

      // Open shop (support both ids)
      const openShopBtn = document.getElementById('openShopBtn') || document.getElementById('shopBtn');
      if(openShopBtn){
        openShopBtn.addEventListener('click', () => {
          const modal = document.getElementById('shopModal');
          if(modal) { modal.style.display = 'flex'; modal.setAttribute('aria-hidden','false'); }
          else console.warn('shopModal not found');
        });
      }

      // Close shop
      const closeShop = document.getElementById('closeShop');
      if(closeShop) closeShop.addEventListener('click', () => {
        const modal = document.getElementById('shopModal');
        if(modal) { modal.style.display = 'none'; modal.setAttribute('aria-hidden','true'); }
      });

      // Back to home from game
      const backBtn = document.getElementById('backBtn');
      if(backBtn) backBtn.addEventListener('click', () => {
        document.getElementById('game-screen').classList.remove('active');
        document.getElementById('home-screen').classList.add('active');
      });
    });
  </script>
</body>
  </html>
